<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ESTIM - Emploi du temps</title>
  
  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Configuration des couleurs personnalisées ESTIM -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            estim: {
              black: '#1F2937',
              green: '#10B981',
              gold: '#F59E0B',
              walnut: '#78350F',
              lightgray: '#F3F4F6',
              card: '#FFFFFF',
              border: '#E5E7EB',
              blue: '#3B82F6',
              red: '#EF4444'
            }
          },
          boxShadow: {
            'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
            'glow': '0 0 15px rgba(16, 185, 129, 0.2)'
          },
          animation: {
            'shimmer': 'shimmer 2s linear infinite',
          },
          keyframes: {
            shimmer: {
              '100%': { transform: 'translateX(100%)' },
            }
          }
        }
      }
    }
  </script>

  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <!-- Ionic Framework (CSS) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- <style>
    body { font-family: 'Poppins', sans-serif; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* Animations */
    .fade-in-up { animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(15px); }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
    
    .stagger-1 { animation-delay: 50ms; }
    .stagger-2 { animation-delay: 100ms; }
    .stagger-3 { animation-delay: 150ms; }
    .stagger-4 { animation-delay: 200ms; }

    /* Custom Select Styling */
    select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 0.75rem center;
      background-repeat: no-repeat;
      background-size: 1.25em 1.25em;
    }

    /* Timeline Connector */
    .timeline-line::before {
      content: '';
      position: absolute;
      top: 24px;
      bottom: -16px;
      left: 15px;
      width: 2px;
      background-color: #E5E7EB;
      z-index: 0;
    }
    .timeline-item:last-child .timeline-line::before {
      display: none;
    }
    
    /* Sticky Date Header Styling */
    .date-header {
        position: sticky;
        top: -1px;
        z-index: 20;
        background: rgba(249, 250, 251, 0.95);
        backdrop-filter: blur(8px);
        padding: 16px 0 8px 0;
        border-bottom: 1px dashed #E5E7EB;
        box-shadow: 0 4px 6px -4px rgba(0,0,0,0.05);
    }

    /* Type Badges Colors */
    .type-badge { transition: all 0.2s; }
    .type-cours { background-color: #EFF6FF; color: #1D4ED8; border: 1px solid #BFDBFE; }
    .type-td { background-color: #FFF7ED; color: #C2410C; border: 1px solid #FED7AA; }
    .type-exam { background-color: #FEF2F2; color: #B91C1C; border: 1px solid #FECACA; }
    .type-event { background-color: #ECFDF5; color: #047857; border: 1px solid #A7F3D0; }
    .type-break { background-color: #F3F4F6; color: #4B5563; border: 1px solid #E5E7EB; }
  </style> -->

    <style>
    /* --- CONFIGURATION GLOBALE --- */
    body { font-family: 'Poppins', sans-serif; }
    
    /* Cacher la scrollbar mais permettre le scroll */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* --- ANIMATIONS --- */
    .fade-in-up { animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(15px); }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

    /* --- CUSTOM SELECT STYLING --- */
    select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 0.75rem center;
      background-repeat: no-repeat;
      background-size: 1.25em 1.25em;
    }

    /* --- STYLES IONIC SPÉCIFIQUES --- */
    /* Comme demandé, on modifie Ionic directement via CSS car Tailwind n'agit pas bien sur le Shadow DOM */
    ion-header {
      box-shadow: none !important; /* Supprime l'ombre par défaut d'Ionic */
    }
    
    ion-toolbar {
      --background: #ffffff; /* Force le fond blanc */
      --border-color: #E5E7EB; /* Couleur de la bordure */
      padding-top: env(safe-area-inset-top);
      height: 64px;
    }

    ion-content {
      --background: #F9FAFB; /* bg-gray-50 */
      --padding-start: 0;
      --padding-end: 0;
      --padding-top: 0;
      --padding-bottom: 0;
    }

    /* --- TIMELINE & LAYOUT --- */
    .timeline-line::before {
      content: '';
      position: absolute;
      top: 24px;
      bottom: -16px;
      left: 15px;
      width: 2px;
      background-color: #E5E7EB;
      z-index: 0;
    }
    .timeline-item:last-child .timeline-line::before {
      display: none;
    }
    
    /* Sticky Date Header Styling */
    .date-header {
        position: sticky;
        top: -1px;
        z-index: 20;
        background: rgba(249, 250, 251, 0.95);
        backdrop-filter: blur(8px);
        padding: 16px 0 8px 0;
        border-bottom: 1px dashed #E5E7EB;
        box-shadow: 0 4px 6px -4px rgba(0,0,0,0.05);
    }

    /* --- TYPE BADGES COLORS --- */
    .type-badge { transition: all 0.2s; }
    .type-cours { background-color: #EFF6FF; color: #1D4ED8; border: 1px solid #BFDBFE; }
    .type-td { background-color: #FFF7ED; color: #C2410C; border: 1px solid #FED7AA; }
    .type-exam { background-color: #FEF2F2; color: #B91C1C; border: 1px solid #FECACA; }
    .type-event { background-color: #ECFDF5; color: #047857; border: 1px solid #A7F3D0; }
    .type-break { background-color: #F3F4F6; color: #4B5563; border: 1px solid #E5E7EB; }
  </style>

</head>

<body class="bg-gray-50 text-estim-black antialiased pb-24 selection:bg-estim-green selection:text-white">
  <ion-app>

    <div class="ion-page h-full flex flex-col">

      <!-- HEADER -->
      <ion-header class="ion-no-border">
        <ion-toolbar class="bg-white/95 backdrop-blur-md border-b border-estim-border h-16 transition-all duration-300">
          <ion-buttons slot="start" class="pl-2">
            <button onclick="window.history.back()" class="group flex items-center justify-center w-10 h-10 rounded-xl hover:bg-gray-100 active:scale-90 transition-all duration-200">
              <ion-icon name="arrow-back" class="text-xl text-gray-700 group-hover:-translate-x-1 transition-transform"></ion-icon>
            </button>
          </ion-buttons>
          <ion-title slot="start" class="text-lg font-bold text-estim-black tracking-tight flex items-center gap-2">
            Emploi du temps
          </ion-title>
        </ion-toolbar>
      </ion-header>

      <!-- CONTENU PRINCIPAL -->
      <ion-content class="ion-padding-top scroll-smooth">
        <div class="p-4 max-w-2xl mx-auto space-y-6 fade-in-up">

          <!-- SECTION FILTRES -->
          <div class="bg-white rounded-2xl p-5 shadow-soft border border-estim-border relative overflow-hidden transition-shadow hover:shadow-md">
            <div class="absolute top-0 right-0 w-32 h-32 bg-estim-green/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>

            <div class="flex justify-between items-center mb-5">
              <h2 class="text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2">
                <ion-icon name="options-outline"></ion-icon> Filtres rapides
              </h2>
              <button id="reset-filters" class="text-xs text-estim-green font-semibold hover:underline transition-opacity hidden">
                Effacer tout
              </button>
            </div>

            <div class="space-y-4">
              <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                <!-- Cycle -->
                <div class="flex flex-col gap-1.5">
                  <label for="cycle-select" class="text-xs font-semibold text-gray-500 ml-1">Cycle</label>
                  <select id="cycle-select" class="w-full bg-gray-50 border border-gray-200 text-estim-black text-sm rounded-xl focus:ring-2 focus:ring-estim-green/20 focus:border-estim-green transition-all block p-3 h-12 font-medium hover:bg-gray-100 cursor-pointer">
                    <option value="all">Tous les cycles</option>
                    <option value="1ère Année">1ère Année</option>
                    <option value="2ème Année">2ème Année</option>
                    <option value="3ème Année">3ème Année</option>
                  </select>
                </div>

                <!-- Filière -->
                <div class="flex flex-col gap-1.5">
                  <label for="filiere-select" class="text-xs font-semibold text-gray-500 ml-1">Filière</label>
                  <select id="filiere-select" class="w-full bg-gray-50 border border-gray-200 text-estim-black text-sm rounded-xl focus:ring-2 focus:ring-estim-green/20 focus:border-estim-green transition-all block p-3 h-12 font-medium hover:bg-gray-100 cursor-pointer">
                    <option value="all">Toutes les filières</option>
                    <option value="Génie Logiciel">Génie Logiciel</option>
                    <option value="Réseaux & Télécoms">Réseaux & Télécoms</option>
                    <option value="Gestion & Commerce">Gestion & Commerce</option>
                    <option value="Ingénierie Système">Ingénierie Système</option>
                  </select>
                </div>

                <!-- Type -->
                <div class="flex flex-col gap-1.5">
                  <label for="type-select" class="text-xs font-semibold text-gray-500 ml-1">Type</label>
                  <select id="type-select" class="w-full bg-gray-50 border border-gray-200 text-estim-black text-sm rounded-xl focus:ring-2 focus:ring-estim-green/20 focus:border-estim-green transition-all block p-3 h-12 font-medium hover:bg-gray-100 cursor-pointer">
                    <option value="all">Tous types</option>
                    <option value="cours">Cours Magistral</option>
                    <option value="td">Travaux Dirigés</option>
                    <option value="exam">Examen / Devoir</option>
                    <option value="event">Événement</option>
                  </select>
                </div>
              </div>

              <!-- Actions -->
              <div class="pt-1">
                <button id="validate-btn" class="w-full bg-estim-black hover:bg-gray-800 text-white shadow-lg hover:shadow-xl transition-all duration-300 active:scale-[0.98] py-3.5 rounded-xl font-bold text-sm tracking-wide flex items-center justify-center gap-2 group overflow-hidden relative">
                  <span class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]"></span>
                  <ion-icon name="funnel-outline" class="text-lg"></ion-icon>
                  <span>Appliquer les filtres</span>
                </button>
              </div>
            </div>
          </div>

          <!-- CONTENEUR EMPLOI DU TEMPS -->
          <div id="schedule-container" class="space-y-2 min-h-[400px]">
            <!-- Le contenu sera injecté ici par JavaScript -->
          </div>

        </div>
      </ion-content>
    </div>
  </ion-app>

  <!-- Lien vers le fichier JavaScript séparé -->
  <script type="module" src="plan.js"></script>
</body>
</html>